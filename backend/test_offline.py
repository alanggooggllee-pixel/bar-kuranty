"""Offline end-to-end test: full pipeline with mock AI response.
No API keys needed â€” validates the entire flow locally."""

import json

# === 1. Ğ¢Ğ ĞĞĞ¡ĞšĞ Ğ˜ĞŸĞ¢ (Ğ¸Ğ¼Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ° Whisper) ===

MOCK_TRANSCRIPT = """
Hostess: Ğ”Ğ¾Ğ±Ñ€Ñ‹Ğ¹ Ğ²ĞµÑ‡ĞµÑ€, ĞºĞ°Ñ„Ğµ-Ğ±Ğ°Ñ€ ĞšÑƒÑ€Ğ°Ğ½Ñ‚Ñ‹, Ğ¼ĞµĞ½Ñ Ğ·Ğ¾Ğ²ÑƒÑ‚ ĞœĞ°Ğ´Ğ¸Ğ½Ğ°, Ñ‡ĞµĞ¼ Ğ¼Ğ¾Ğ³Ñƒ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‡ÑŒ?
Ğ“Ğ¾ÑÑ‚ÑŒ: Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ, Ñ Ñ…Ğ¾Ñ‚ĞµĞ» Ğ±Ñ‹ Ğ·Ğ°Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑ‚Ğ¾Ğ»Ğ¸Ğº.
Hostess: ĞšĞ¾Ğ½ĞµÑ‡Ğ½Ğ¾! Ğ—Ğ²Ğ¾Ğ½Ğ¾Ğº Ğ·Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ´Ğ»Ñ ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ñ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ° Ğ¾Ğ±ÑĞ»ÑƒĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ. ĞŸĞ¾Ğ´ÑĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ, Ğ½Ğ° ĞºĞ°ĞºÑƒÑ Ğ´Ğ°Ñ‚Ñƒ Ğ¸ Ğ²Ñ€ĞµĞ¼Ñ Ğ²Ñ‹ Ñ…Ğ¾Ñ‚ĞµĞ»Ğ¸ Ğ±Ñ‹ Ğ·Ğ°Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ?
Ğ“Ğ¾ÑÑ‚ÑŒ: ĞĞ° ÑÑ‚Ñƒ ÑÑƒĞ±Ğ±Ğ¾Ñ‚Ñƒ, Ñ‡Ğ°ÑĞ¾Ğ² Ğ½Ğ° Ğ²Ğ¾ÑĞµĞ¼ÑŒ Ğ²ĞµÑ‡ĞµÑ€Ğ°.
Hostess: ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾, Ğ½Ğ° ÑÑƒĞ±Ğ±Ğ¾Ñ‚Ñƒ, 22 Ñ„ĞµĞ²Ñ€Ğ°Ğ»Ñ, Ğ½Ğ° 20:00. Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ³Ğ¾ÑÑ‚ĞµĞ¹ Ğ±ÑƒĞ´ĞµÑ‚?
Ğ“Ğ¾ÑÑ‚ÑŒ: ĞĞ°Ñ Ğ±ÑƒĞ´ĞµÑ‚ Ñ‡ĞµÑ‚Ğ²ĞµÑ€Ğ¾.
Hostess: ĞŸĞ¾Ğ½Ğ¸Ğ¼Ğ°Ñ. Ğ’Ñ‹ Ğ¿Ñ€ĞµĞ´Ğ¿Ğ¾Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚Ğµ Ğ·Ğ°Ğ», Ñ‚ĞµÑ€Ñ€Ğ°ÑÑƒ Ğ¸Ğ»Ğ¸ Ğ±Ğ°Ñ€Ğ½ÑƒÑ Ğ·Ğ¾Ğ½Ñƒ?
Ğ“Ğ¾ÑÑ‚ÑŒ: Ğ›ÑƒÑ‡ÑˆĞµ Ñ‚ĞµÑ€Ñ€Ğ°ÑÑƒ, ĞµÑĞ»Ğ¸ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾.
Hostess: Ğš ÑĞ¾Ğ¶Ğ°Ğ»ĞµĞ½Ğ¸Ñ, Ñ‚ĞµÑ€Ñ€Ğ°ÑĞ° Ğ½Ğ° 20:00 ÑƒĞ¶Ğµ Ğ·Ğ°Ğ½ÑÑ‚Ğ°. ĞœĞ¾Ğ³Ñƒ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ Ğ²Ğ°Ğ¼ Ñ‚ĞµÑ€Ñ€Ğ°ÑÑƒ Ğ½Ğ° 19:00 Ğ¸Ğ»Ğ¸ 21:00, Ğ»Ğ¸Ğ±Ğ¾ Ğ¿Ñ€ĞµĞºÑ€Ğ°ÑĞ½Ñ‹Ğ¹ ÑÑ‚Ğ¾Ğ»Ğ¸Ğº Ğ² Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¼ Ğ·Ğ°Ğ»Ğµ Ñ Ğ²Ğ¸Ğ´Ğ¾Ğ¼ Ğ½Ğ° ÑĞ°Ğ´. Ğ§Ñ‚Ğ¾ Ğ²Ğ°Ğ¼ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ğ¿Ğ¾Ğ´Ğ¾Ğ¹Ğ´Ñ‘Ñ‚?
Ğ“Ğ¾ÑÑ‚ÑŒ: Ğ”Ğ°Ğ²Ğ°Ğ¹Ñ‚Ğµ Ğ½Ğ° 21:00 Ğ½Ğ° Ñ‚ĞµÑ€Ñ€Ğ°ÑĞµ.
Hostess: Ğ—Ğ°Ğ¼ĞµÑ‡Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾! Ğ˜Ñ‚Ğ°Ğº, Ñ Ğ·Ğ°Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ»Ğ° Ğ´Ğ»Ñ Ğ²Ğ°Ñ ÑÑ‚Ğ¾Ğ»Ğ¸Ğº Ğ½Ğ° Ñ‚ĞµÑ€Ñ€Ğ°ÑĞµ Ğ½Ğ° ÑÑƒĞ±Ğ±Ğ¾Ñ‚Ñƒ, 22 Ñ„ĞµĞ²Ñ€Ğ°Ğ»Ñ, Ğ½Ğ° 21:00, Ğ½Ğ° Ñ‡ĞµÑ‚Ğ²ĞµÑ€Ñ‹Ñ… Ğ³Ğ¾ÑÑ‚ĞµĞ¹. Ğ’ÑÑ‘ Ğ²ĞµÑ€Ğ½Ğ¾?
Ğ“Ğ¾ÑÑ‚ÑŒ: Ğ”Ğ°, Ğ²ÑÑ‘ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾.
Hostess: ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾! Ğ¥Ğ¾Ñ‚ĞµĞ»Ğ° Ğ±Ñ‹ ÑƒÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ñ‚ÑŒ â€” Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ, Ñƒ Ğ²Ğ°Ñ ĞµÑÑ‚ÑŒ Ğ¾ÑĞ¾Ğ±Ñ‹Ğ¹ Ğ¿Ğ¾Ğ²Ğ¾Ğ´? Ğ”ĞµĞ½ÑŒ Ñ€Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ñ Ğ¸Ğ»Ğ¸ Ğ´Ñ€ÑƒĞ³Ğ¾Ğµ Ñ‚Ğ¾Ñ€Ğ¶ĞµÑÑ‚Ğ²Ğ¾?
Ğ“Ğ¾ÑÑ‚ÑŒ: ĞĞµÑ‚, Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ ÑƒĞ¶Ğ¸Ğ½ Ñ Ğ´Ñ€ÑƒĞ·ÑŒÑĞ¼Ğ¸.
Hostess: ĞŸĞ¾Ğ½Ğ¸Ğ¼Ğ°Ñ! Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒÑ Ğ·Ğ°Ñ€Ğ°Ğ½ĞµĞµ Ğ¾Ğ·Ğ½Ğ°ĞºĞ¾Ğ¼Ğ¸Ñ‚ÑŒÑÑ Ñ Ğ½Ğ°ÑˆĞ¸Ğ¼ Ğ¼ĞµĞ½Ñ â€” Ñƒ Ğ½Ğ°Ñ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ğ»Ğ¾ÑÑŒ ÑĞµĞ·Ğ¾Ğ½Ğ½Ğ¾Ğµ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ. Ğ•ÑĞ»Ğ¸ Ñƒ ĞºĞ¾Ğ³Ğ¾-Ñ‚Ğ¾ Ğ¸Ğ· Ğ³Ğ¾ÑÑ‚ĞµĞ¹ ĞµÑÑ‚ÑŒ Ğ°Ğ»Ğ»ĞµÑ€Ğ³Ğ¸Ğ¸, Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ½Ğ°Ğ¼ Ğ·Ğ½Ğ°Ñ‚ÑŒ Ğ·Ğ°Ñ€Ğ°Ğ½ĞµĞµ.
Ğ“Ğ¾ÑÑ‚ÑŒ: Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾, ÑĞ¿Ğ°ÑĞ¸Ğ±Ğ¾.
Hostess: Ğ¡Ğ¿Ğ°ÑĞ¸Ğ±Ğ¾ Ğ·Ğ° Ğ·Ğ²Ğ¾Ğ½Ğ¾Ğº, Ğ±ÑƒĞ´ĞµĞ¼ Ñ€Ğ°Ğ´Ñ‹ Ğ²Ğ°Ñ Ğ²Ğ¸Ğ´ĞµÑ‚ÑŒ Ğ² ÑÑƒĞ±Ğ±Ğ¾Ñ‚Ñƒ! Ğ”Ğ¾ ÑĞ²Ğ¸Ğ´Ğ°Ğ½Ğ¸Ñ!
""".strip()

# === 2. ĞĞĞĞ›Ğ˜Ğ— (Ğ¸Ğ¼Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° Claude/Gemini) ===

MOCK_ANALYSIS = """**ĞÑ†ĞµĞ½ĞºĞ°**: A

**Ğ¡Ğ¾Ğ±Ğ»ÑĞ´Ñ‘Ğ½Ğ½Ñ‹Ğµ Ğ¿ÑƒĞ½ĞºÑ‚Ñ‹**:
- âœ… ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğµ: Â«Ğ”Ğ¾Ğ±Ñ€Ñ‹Ğ¹ Ğ²ĞµÑ‡ĞµÑ€, ĞºĞ°Ñ„Ğµ-Ğ±Ğ°Ñ€ ĞšÑƒÑ€Ğ°Ğ½Ñ‚Ñ‹, Ğ¼ĞµĞ½Ñ Ğ·Ğ¾Ğ²ÑƒÑ‚ ĞœĞ°Ğ´Ğ¸Ğ½Ğ°, Ñ‡ĞµĞ¼ Ğ¼Ğ¾Ğ³Ñƒ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‡ÑŒ?Â»
- âœ… ĞŸÑ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ¾ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸: Â«Ğ—Ğ²Ğ¾Ğ½Ğ¾Ğº Ğ·Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ´Ğ»Ñ ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ñ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ° Ğ¾Ğ±ÑĞ»ÑƒĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸ÑÂ»
- âœ… ĞĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ ÑĞ»ÑƒÑˆĞ°Ğ½Ğ¸Ğµ â€” Ğ½Ğµ Ğ¿ĞµÑ€ĞµĞ±Ğ¸Ğ²Ğ°Ğ»Ğ° Ğ³Ğ¾ÑÑ‚Ñ
- âœ… Ğ£Ñ‚Ğ¾Ñ‡Ğ½ĞµĞ½Ğ¸Ğµ Ğ´ĞµÑ‚Ğ°Ğ»ĞµĞ¹: Ğ´Ğ°Ñ‚Ğ° (22 Ñ„ĞµĞ²Ñ€Ğ°Ğ»Ñ), Ğ²Ñ€ĞµĞ¼Ñ (20:00â†’21:00), ĞºĞ¾Ğ»-Ğ²Ğ¾ (4), Ñ€Ğ°ÑÑĞ°Ğ´ĞºĞ° (Ñ‚ĞµÑ€Ñ€Ğ°ÑĞ°)
- âœ… ĞŸÑ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ°Ğ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²: Ñ‚ĞµÑ€Ñ€Ğ°ÑĞ° Ğ½Ğ° 19:00/21:00, ÑÑ‚Ğ¾Ğ»Ğ¸Ğº Ğ² Ğ·Ğ°Ğ»Ğµ Ñ Ğ²Ğ¸Ğ´Ğ¾Ğ¼ Ğ½Ğ° ÑĞ°Ğ´
- âœ… ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ±Ñ€Ğ¾Ğ½Ğ¸: Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ»Ğ° Ğ²ÑĞµ Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸
- âœ… Ğ”Ğ¾Ğ¿. Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ: Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸Ğ»Ğ° Ğ¼ĞµĞ½Ñ, ÑĞ¿Ñ€Ğ¾ÑĞ¸Ğ»Ğ° Ğ¾Ğ± Ğ°Ğ»Ğ»ĞµÑ€Ğ³Ğ¸ÑÑ… Ğ¸ Ğ¾ÑĞ¾Ğ±Ñ‹Ñ… Ğ¿Ğ¾Ğ²Ğ¾Ğ´Ğ°Ñ…
- âœ… Ğ‘Ğ»Ğ°Ğ³Ğ¾Ğ´Ğ°Ñ€Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¸ Ğ¿Ñ€Ğ¾Ñ‰Ğ°Ğ½Ğ¸Ğµ

**Ğ—Ğ°Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ñ**:
- ĞĞµÑ‚ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ñ… Ğ·Ğ°Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ğ¹. Ğ—Ğ²Ğ¾Ğ½Ğ¾Ğº Ğ¿Ñ€Ğ¾Ğ²ĞµĞ´Ñ‘Ğ½ Ğ¾Ğ±Ñ€Ğ°Ğ·Ñ†Ğ¾Ğ²Ğ¾.

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸**:
- ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ€ĞºĞ¾Ğ²ĞºÑƒ Ğ¸Ğ»Ğ¸ Ñ‚Ñ€Ğ°Ğ½ÑÑ„ĞµÑ€ Ğ´Ğ»Ñ VIP-Ğ³Ğ¾ÑÑ‚ĞµĞ¹.

**ĞšÑ€Ğ°Ñ‚ĞºĞ¾Ğµ Ñ€ĞµĞ·ÑĞ¼Ğµ**: Ğ˜Ğ´ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ·Ğ²Ğ¾Ğ½Ğ¾Ğº. ĞœĞ°Ğ´Ğ¸Ğ½Ğ° ÑĞ¾Ğ±Ğ»ÑĞ»Ğ° Ğ²ÑĞµ ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ñ‹ Ğ¾Ğ±ÑĞ»ÑƒĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ, Ğ±Ñ‹Ğ»Ğ° Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚Ğ»Ğ¸Ğ²Ğ° Ğ¸ Ğ¿Ñ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ°, Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸Ğ»Ğ° Ğ°Ğ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ñ‹ Ğ¸ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ğ»Ğ° Ğ±Ñ€Ğ¾Ğ½ÑŒ."""

# === 3. TELEGRAM (Ğ¸Ğ¼Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸) ===

def mock_telegram_send(analysis: str, filename: str) -> dict:
    """Simulate Telegram message formatting without sending."""
    header = f"ğŸ“ *ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ·Ğ²Ğ¾Ğ½ĞºĞ°*\nğŸ“ `{filename}`\n{'â€”' * 30}\n\n"
    message = header + analysis

    return {
        "chat_id": "DEMO_CHAT",
        "text": message,
        "parse_mode": "Markdown",
        "length": len(message),
        "under_limit": len(message) <= 4096,
    }


# === Ğ—ĞĞŸĞ£Ğ¡Ğš Ğ¢Ğ•Ğ¡Ğ¢Ğ ===

if __name__ == "__main__":
    print("=" * 60)
    print("  ĞĞ¤Ğ›ĞĞ™Ğ-Ğ¢Ğ•Ğ¡Ğ¢ ĞšĞĞĞ’Ğ•Ğ™Ğ•Ğ Ğ")
    print("  ĞšĞ°Ñ„Ğµ-Ğ±Ğ°Ñ€ ĞšÑƒÑ€Ğ°Ğ½Ñ‚Ñ‹ â€” ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ° Ğ·Ğ²Ğ¾Ğ½ĞºĞ¾Ğ²")
    print("=" * 60)

    # Ğ¨Ğ°Ğ³ 1: Ğ¢Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
    print("\nğŸ“ Ğ¨ĞĞ“ 1: Ğ¢Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (Whisper)")
    print(f"   Ğ˜Ğ¼Ñ Ñ„Ğ°Ğ¹Ğ»Ğ°: call_rec_20260218_193000.m4a")
    print(f"   Ğ Ğ°Ğ·Ğ¼ĞµÑ€ Ğ°ÑƒĞ´Ğ¸Ğ¾: ~2.4 MB (Ğ¸Ğ¼Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ)")
    print(f"   Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: {len(MOCK_TRANSCRIPT)} ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ² Ñ‚Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ°")
    print(f"   Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: âœ… OK")

    # Ğ¨Ğ°Ğ³ 2: ĞĞ½Ğ°Ğ»Ğ¸Ğ·
    print("\nğŸ¤– Ğ¨ĞĞ“ 2: AI-Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· (Claude / Gemini)")
    print(f"   ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚: ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ñ‹ hostess ({8} Ğ¿ÑƒĞ½ĞºÑ‚Ğ¾Ğ² + Ñ‚Ğ¾Ğ½ + ÑˆĞºĞ°Ğ»Ğ° A-D)")
    print(f"   Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: {len(MOCK_ANALYSIS)} ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ² Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°")

    # Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ¾Ñ†ĞµĞ½ĞºĞ¸
    grade = "?"
    for line in MOCK_ANALYSIS.split("\n"):
        if line.startswith("**ĞÑ†ĞµĞ½ĞºĞ°**"):
            grade = line.split(":")[-1].strip()
            break
    print(f"   ĞÑ†ĞµĞ½ĞºĞ°: {grade}")
    print(f"   Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: âœ… OK")

    # Ğ¨Ğ°Ğ³ 3: Telegram
    print("\nğŸ“¨ Ğ¨ĞĞ“ 3: ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ² Telegram")
    tg_result = mock_telegram_send(MOCK_ANALYSIS, "call_rec_20260218_193000.m4a")
    print(f"   Ğ”Ğ»Ğ¸Ğ½Ğ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ: {tg_result['length']} ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²")
    print(f"   Ğ›Ğ¸Ğ¼Ğ¸Ñ‚ 4096: {'âœ… OK' if tg_result['under_limit'] else 'âš ï¸ ĞĞ‘Ğ Ğ•Ğ—ĞšĞ'}")
    print(f"   Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: âœ… OK (Ğ¸Ğ¼Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ)")

    # Ğ¨Ğ°Ğ³ 4: Ğ˜Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ
    print("\n" + "=" * 60)
    print("  Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢ Ğ¢Ğ•Ğ¡Ğ¢Ğ")
    print("=" * 60)

    print(f"""
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚          â”‚ Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Whisper (STT)      â”‚ âœ… OK (Ğ¼Ğ¾Ğº)        â”‚
â”‚ Claude/Gemini (AI) â”‚ âœ… OK (Ğ¼Ğ¾Ğº)        â”‚
â”‚ Telegram Bot       â”‚ âœ… OK (Ğ¼Ğ¾Ğº)        â”‚
â”‚ Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ     â”‚ âœ… OK              â”‚
â”‚ ĞÑ†ĞµĞ½ĞºĞ° Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ°   â”‚ âœ… {grade:18s}â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜""")

    print("\nğŸ“‹ ĞŸÑ€ĞµĞ²ÑŒÑ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Telegram:")
    print("â€”" * 40)
    print(tg_result["text"])
    print("â€”" * 40)

    # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¾Ğ²
    print("\nğŸ”§ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¾Ğ² Ğ¼Ğ¾Ğ´ÑƒĞ»ĞµĞ¹:")
    modules = {
        "analyzer": "analyzer.py (ANALYSIS_PROMPT, analyze_transcript)",
        "transcriber": "transcriber.py (transcribe_audio)",
        "telegram_bot": "telegram_bot.py (send_report)",
        "main": "main.py (handle_request)",
    }
    all_ok = True
    for mod, desc in modules.items():
        try:
            __import__(mod)
            print(f"   âœ… {desc}")
        except Exception as e:
            print(f"   âŒ {desc} â€” {e}")
            all_ok = False

    print(f"\n{'=' * 60}")
    if all_ok:
        print("  Ğ’Ğ¡Ğ• ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ˜ ĞŸĞ ĞĞ™Ğ”Ğ•ĞĞ« âœ…")
        print("  ĞšĞ¾Ğ½Ğ²ĞµĞ¹ĞµÑ€ Ğ³Ğ¾Ñ‚Ğ¾Ğ² Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ Ñ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ API ĞºĞ»ÑÑ‡Ğ°Ğ¼Ğ¸.")
    else:
        print("  âš ï¸  Ğ•ÑÑ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ°, Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸.")
    print(f"{'=' * 60}")
